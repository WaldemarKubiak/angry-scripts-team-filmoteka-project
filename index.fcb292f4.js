const e=document.querySelector(".loader");e.classList.add("loader-run"),window.addEventListener("load",(function(){e.classList.remove(".loader-run")}));const t="7181a2b710caf29c7153fca4f71ab7d2";var a={getTrending:async(e=1)=>{try{const a=`https://api.themoviedb.org/3/trending/movie/week?api_key=${t}&page=${e}`,o=await fetch(a);return await o.json()}catch(e){console.log(e.message)}},getMovieByID:async e=>{try{const a=`https://api.themoviedb.org/3/movie/${e}?api_key=${t}`,o=await fetch(a);return await o.json()}catch(e){console.log(e.message)}},getMovies:async(e,a=1)=>{try{const o=`https://api.themoviedb.org/3/search/movie?api_key=${t}&query=${e}&page=${a}`,n=await fetch(o);return await n.json()}catch(e){console.log(e.message)}},getGenres:async()=>{try{const e=`https://api.themoviedb.org/3/genre/movie/list?api_key=${t}&language=en-US`,a=await fetch(e);return await a.json()}catch(e){console.log(e.message)}}};const o="watched",n="queue",c=JSON.parse(localStorage.getItem(o))||[],s=JSON.parse(localStorage.getItem(n))||[];var i={onAddToWatched:function(e){var t;c.includes(e)||(c.push(e),t=c,localStorage.setItem(o,JSON.stringify(t)))},onAddToQueue:function(e){var t;s.includes(e)||(s.push(e),t=s,localStorage.setItem(n,JSON.stringify(t)))}};function d({title:e,overview:t,poster_path:a,id:o}){const n=document.querySelector(".movie-modal"),c=`\n    <div class="movie-modal__img-container">\n     <img src="https://image.tmdb.org/t/p/w400${a}" alt="" class="movie-modal__img"/></div>\n    <div class="movie-modal__content">\n      <h2 class="movie-modal__title">${e}</h2>\n      <div class="movie-modal__about">\n        <h3 class="movie-modal__about-header">ABOUT</h3>   \n        <p class="movie-modal__overview">${t}</p>\n    </div>\n      <div class="btn-wrapper">\n        <button type="button" class="button button--accent add-to-watched-btn" id="addToWatchedBtn">\n          ADD TO WATCHED\n        </button>\n        <button type="button" class="button" id="addToQueueBtn">ADD TO QUEUE</button>\n      </div>\n    </div>\n    `,s=document.createElement("div");s.classList.add("movie-modal__container"),s.innerHTML=c,n.append(s);const d=document.querySelector("[data-modal]");d.classList.remove("backdrop--is-hidden");document.querySelector("[data-modal-close]").addEventListener("click",(()=>{s.remove(),d.classList.add("backdrop--is-hidden")}));document.querySelector(".add-to-watched-btn").addEventListener("click",(()=>i.onAddToWatched(o)));document.querySelector("#addToQueueBtn").addEventListener("click",(()=>i.onAddToQueue(o)))}var r=e=>{const t=document.querySelector(".movie-collection"),o=e.map((({id:e,title:t,poster_path:a,release_date:o})=>`<div class="movie-card" data-id="${e}">\n      <img src="https://image.tmdb.org/t/p/w400${a}" alt="" class="movie-card__img"/>\n      <div class="movie-data">\n        <p class="movie-data__title">${t}</p>\n        <p class="movie-data__info">\n          <span class="movie-data__genre">Drama, Action </span> |\n          <span class="movie-data__year">${new Date(o).getFullYear()}</span>\n        </p>\n      </div>\n    </div>\n`)).join("");t.innerHTML=o;document.querySelectorAll(".movie-card").forEach((e=>{e.addEventListener("click",(e=>{const t=e.currentTarget.dataset.id;a.getMovieByID(t).then((e=>{console.log(e),d(e)})).catch((e=>console.log(e)))}))}))};a.getTrending().then((e=>e.results)).then(r).catch((e=>console.error(e.message)));const l=document.querySelector(".header-input"),m=document.querySelector(".header-form");document.querySelector(".movie-list");m.addEventListener("submit",(e=>{e.preventDefault();const t=l.value;""!==t&&(e=>{fetch(`https://api.themoviedb.org/3/search/movie?api_key=7181a2b710caf29c7153fca4f71ab7d2&query=${e}`).then((e=>e.json())).then((e=>{console.log(e.results),r(e.results)})).catch((e=>console.error(e)))})(t)}));
//# sourceMappingURL=index.fcb292f4.js.map
